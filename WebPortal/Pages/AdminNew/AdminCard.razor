

<MudCard>
    <MudCardHeader>
        <MudText Typo=@Typo.h5>@CardDefinition.Title</MudText>
    </MudCardHeader>
    <MudCardContent>
        <MudText>@CardDefinition.Description</MudText>
    </MudCardContent>
    <MudCardActions>
        @GenerateActionButton()
    </MudCardActions>
</MudCard>


@code {
    [Parameter]
    public AdminIndex.AdminCardDef CardDefinition { get; set; }

    [CascadingParameter(Name = "UserId")]
    public string UserId { get; set; }

    [CascadingParameter(Name = "CurrentUserEmail")]
    public string CurrentUserEmail { get; set; }

    [CascadingParameter(Name = "IsDatahubAdmin")]
    public bool IsDatahubAdmin { get; set; }

    private RenderFragment GenerateActionButton()
    {
        if (CardDefinition.Action is AdminIndex.AdminCardUrlAction)
        {
            var url = ((AdminIndex.AdminCardUrlAction)CardDefinition.Action).Url;
            return @<MudButton Href=@url Color=@Color.Primary Variant=Variant.Filled>@CardDefinition.Action.Caption</MudButton>;
        }
        else if (CardDefinition.Action is AdminIndex.AdminCardCodeAction)
        {
            var action = ((AdminIndex.AdminCardCodeAction)CardDefinition.Action).Action;
            return @<MudButton OnClick=action Color=@Color.Primary Variant=Variant.Filled>@CardDefinition.Action.Caption</MudButton>;
        }

        return @<MudSpacer />;
    }

}
