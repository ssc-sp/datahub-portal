Our application is deployed in Azure, and as such relies heavily on Azure Application Insights, and it's logging framework, to monitor the health to the application. From a developer's standpoint, integration into app insights is rather easy.

1) Add App Insights and logging framework (Nuget)

    <PackageReference Include="Microsoft.ApplicationInsights.AspNetCore" Version="2.16.0" />
    <PackageReference Include="Microsoft.Extensions.Logging.ApplicationInsights" Version="2.16.0" />

2) Update appsettings file:

  "ApplicationInsights": {
    "InstrumentationKey": "<>"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft": "Warning",
      "Microsoft.Hosting.Lifetime": "Information"
    },
    "ApplicationInsights": {
      "LogLevel": {
          "Default": "Information",
          "Microsoft": "Warning",
          "Microsoft.Hosting.Lifetime": "Information"
      }
    }

3) Add AppInights and out telemetry service Startup.cs:


<DIV style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre"><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">void</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">ConfigureServices</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #4ec9b0">IServiceCollection</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">services</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">services</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddApplicationInsightsTelemetry</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><BR/></DIV>

...
<DIV style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre"><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">services</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddScoped</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #4ec9b0">ApiTelemetryService</SPAN><SPAN style="color: #d4d4d4">&gt;();</SPAN></DIV><BR/></DIV>

4) Add AppInsights to program.cs

<DIV style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre"><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">static</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">IHostBuilder</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">CreateHostBuilder</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">[]&#160;</SPAN><SPAN style="color: #9cdcfe">args</SPAN><SPAN style="color: #d4d4d4">)&#160;=&gt;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">Host</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">CreateDefaultBuilder</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">args</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</SPAN><SPAN style="color: #dcdcaa">ConfigureLogging</SPAN><SPAN style="color: #d4d4d4">((</SPAN><SPAN style="color: #9cdcfe">hostingContext</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">)&#160;=&gt;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">ClearProviders</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddConsole</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;Providing&#160;an&#160;instrumentation&#160;key&#160;here&#160;is&#160;required&#160;if&#160;you're&#160;using</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;standalone&#160;package&#160;Microsoft.Extensions.Logging.ApplicationInsights</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;or&#160;if&#160;you&#160;want&#160;to&#160;capture&#160;logs&#160;from&#160;early&#160;in&#160;the&#160;application&#160;startup</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;pipeline&#160;from&#160;Startup.cs&#160;or&#160;Program.cs&#160;itself.</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">var</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">key</SPAN><SPAN style="color: #d4d4d4">&#160;=&#160;</SPAN><SPAN style="color: #9cdcfe">hostingContext</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">Configuration</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">GetSection</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #ce9178">"ApplicationInsights"</SPAN><SPAN style="color: #d4d4d4">).</SPAN><SPAN style="color: #dcdcaa">GetValue</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&gt;(</SPAN><SPAN style="color: #ce9178">"InstrumentationKey"</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddApplicationInsights</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">key</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddAzureWebAppDiagnostics</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddEventLog</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;Adding&#160;the&#160;filter&#160;below&#160;to&#160;ensure&#160;logs&#160;of&#160;all&#160;severity&#160;from&#160;Program.cs</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;is&#160;sent&#160;to&#160;ApplicationInsights.</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddFilter</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #4ec9b0">Microsoft</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Extensions</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Logging</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsights</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsightsLoggerProvider</SPAN><SPAN style="color: #d4d4d4">&gt;(</SPAN><SPAN style="color: #569cd6">typeof</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #4ec9b0">Program</SPAN><SPAN style="color: #d4d4d4">).</SPAN><SPAN style="color: #9cdcfe">FullName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">LogLevel</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">Trace</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;Adding&#160;the&#160;filter&#160;below&#160;to&#160;ensure&#160;logs&#160;of&#160;all&#160;severity&#160;from&#160;Startup.cs</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;is&#160;sent&#160;to&#160;ApplicationInsights.</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">logBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">AddFilter</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #4ec9b0">Microsoft</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Extensions</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Logging</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsights</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsightsLoggerProvider</SPAN><SPAN style="color: #d4d4d4">&gt;(</SPAN><SPAN style="color: #569cd6">typeof</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #4ec9b0">Startup</SPAN><SPAN style="color: #d4d4d4">).</SPAN><SPAN style="color: #9cdcfe">FullName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">LogLevel</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">Trace</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;&#160;logBuilder.AddFilter("Microsoft.AspNetCore.SignalR",&#160;LogLevel.Debug);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #6a9955">//&#160;&#160;logBuilder.AddFilter("Microsoft.AspNetCore.Http.Connections",&#160;LogLevel.Debug);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;})</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.</SPAN><SPAN style="color: #dcdcaa">ConfigureWebHostDefaults</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">webBuilder</SPAN><SPAN style="color: #d4d4d4">&#160;=&gt;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">webBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">UseStartup</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #4ec9b0">Startup</SPAN><SPAN style="color: #d4d4d4">&gt;();</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">webBuilder</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">ConfigureAppConfiguration</SPAN><SPAN style="color: #d4d4d4">((</SPAN><SPAN style="color: #9cdcfe">ctx</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">cb</SPAN><SPAN style="color: #d4d4d4">)&#160;=&gt;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #c586c0">if</SPAN><SPAN style="color: #d4d4d4">&#160;(!</SPAN><SPAN style="color: #9cdcfe">ctx</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">HostingEnvironment</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">IsDevelopment</SPAN><SPAN style="color: #d4d4d4">())&#160;</SPAN><SPAN style="color: #6a9955">//&#160;you'll&#160;have&#160;to&#160;find&#160;the&#160;right&#160;method&#160;to&#160;check&#160;that</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">StaticWebAssetsLoader</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">UseStaticWebAssets</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">ctx</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">HostingEnvironment</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">ctx</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #9cdcfe">Configuration</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;});</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;});</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4"></SPAN></DIV></DIV>

This will allow app insights to automatically capture the logging messages in App Insights and to capture any issues at the early stages of application startup. 



5) Addition of a custom AppInsight Metric and Telemetry events:

We added a class in Datahub.Shared services layer to allow for code to add metrics and custom events to be logged and tracked in AppInsights, to monitor the health of the application.

<DIV style="color: #d4d4d4;background-color: #1e1e1e;font-family: Consolas, 'Courier New', monospace;font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre"><DIV><SPAN style="color: #c586c0">using</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">System</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Collections</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Generic</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #c586c0">using</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">Microsoft</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsights</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #c586c0">using</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">Microsoft</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">ApplicationInsights</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #4ec9b0">Extensibility</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><BR/><DIV><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">class</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">ApiTelemetryService</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">const</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;&#160;FileUploadSizeMetricName&#160;=&#160;</SPAN><SPAN style="color: #ce9178">"FIleUploadSize"</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">const</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;&#160;FileUploadTimeMetricName&#160;=&#160;</SPAN><SPAN style="color: #ce9178">"FIleUploadTime"</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">const</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;&#160;FileUploadBPMSMetricName&#160;=&#160;</SPAN><SPAN style="color: #ce9178">"FIleUploadBPMS"</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">private</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">TelemetryConfiguration</SPAN><SPAN style="color: #d4d4d4">&#160;_config&#160;=&#160;</SPAN><SPAN style="color: #9cdcfe">TelemetryConfiguration</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">CreateDefault</SPAN><SPAN style="color: #d4d4d4">();</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">private</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">TelemetryClient</SPAN><SPAN style="color: #d4d4d4">&#160;_client;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">protected</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">TelemetryClient</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">client</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">get</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #c586c0">if</SPAN><SPAN style="color: #d4d4d4">&#160;(</SPAN><SPAN style="color: #9cdcfe">_client</SPAN><SPAN style="color: #d4d4d4">&#160;==&#160;</SPAN><SPAN style="color: #569cd6">null</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">_client</SPAN><SPAN style="color: #d4d4d4">&#160;=&#160;</SPAN><SPAN style="color: #569cd6">new</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">TelemetryClient</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">_config</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #c586c0">return</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">_client</SPAN><SPAN style="color: #d4d4d4">;</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">ApiTelemetryService</SPAN><SPAN style="color: #d4d4d4">()</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">void</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">LogMetric</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">metricName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">double</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">value</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">var</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">dict</SPAN><SPAN style="color: #d4d4d4">&#160;=&#160;</SPAN><SPAN style="color: #569cd6">new</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #4ec9b0">Dictionary</SPAN><SPAN style="color: #d4d4d4">&lt;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&gt;();</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">dict</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">Add</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #ce9178">"filename"</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #9cdcfe">client</SPAN><SPAN style="color: #d4d4d4">.</SPAN><SPAN style="color: #dcdcaa">TrackMetric</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">metricName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">value</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">dict</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><BR/><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">void</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">LogFileUploadSize</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #569cd6">long</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">filesize</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #dcdcaa">LogMetric</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">FileUploadSizeMetricName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">filesize</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">void</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">LogFileUploadTime</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #569cd6">long</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">uploadTime</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #dcdcaa">LogMetric</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">FileUploadTimeMetricName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">uploadTime</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #569cd6">public</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #569cd6">void</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #dcdcaa">LogFileUploadBpms</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #569cd6">long</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">bpms</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #569cd6">string</SPAN><SPAN style="color: #d4d4d4">&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">)</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;{</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</SPAN><SPAN style="color: #dcdcaa">LogMetric</SPAN><SPAN style="color: #d4d4d4">(</SPAN><SPAN style="color: #9cdcfe">FileUploadBPMSMetricName</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">bpms</SPAN><SPAN style="color: #d4d4d4">,&#160;</SPAN><SPAN style="color: #9cdcfe">filename</SPAN><SPAN style="color: #d4d4d4">);</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">&#160;&#160;&#160;&#160;}</SPAN></DIV><DIV><SPAN style="color: #d4d4d4">}</SPAN></DIV></DIV>