@using MudBlazor.Utilities

<MudStack Row AlignItems="AlignItems.Center">
    <MudImage src="_content/Datahub.Core/img/datahub-logo-v2.png" Alt="datahub logo" Height="30"/>
    <MudText Typo="Typo.h6" Style="@_titleStyle">
        @Localizer["MainTitle"]
    </MudText>
</MudStack>

@*<MudSpacer/>
<HomeSearch />*@

<MudSpacer/>
<SearchPopover />

<MudSpacer />
<NotificationsList IsNotificationsListOpen="@IsNotificationsListOpen" ToggleNotificationsList="ToggleNotificationsList" />
<HelpPopup IsHelpPopupOpen="@IsHelpPopupOpen" ToggleHelp="ToggleHelp"/>
<TopBarProfileButton />

@code {

    [Parameter]
    public string SupportFormUrl { get; set; }
    
    private string _titleStyle;

    private bool IsNotificationsListOpen { get; set; }
    private bool IsHelpPopupOpen { get; set; }

    private void ToggleNotificationsList()
    {
        IsNotificationsListOpen = !IsNotificationsListOpen;
        IsHelpPopupOpen = false;
    }

    private void ToggleHelp()
    {
        IsNotificationsListOpen = false;
        IsHelpPopupOpen = !IsHelpPopupOpen;
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();

        _titleStyle = new StyleBuilder()
            .AddStyle("color", "var(--mud-palette-text-primary)")
            .Build();
    }
}