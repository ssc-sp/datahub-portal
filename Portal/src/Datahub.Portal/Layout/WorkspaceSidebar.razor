@using Datahub.Core.Model.Achievements
@using Datahub.Core.Model.Projects
@using Datahub.Core.Model.UserTracking
@using Datahub.Portal.Components.User
@using MudBlazor.Utilities

@inject IUserInformationService _userInformationService
@inject UserLocationManagerService _userLocationManagerService
@inject IDbContextFactory<DatahubProjectDBContext> _dbContextFactory


<MudStack Class="px-4 mt-6">
    <MudStack Class="ml-2">
        <MudStack Row AlignItems="AlignItems.Center">
            <MudAvatar Size="Size.Small">
                <MudImage Src="https://cdn.autonomous.ai/static/upload/images/common/upload/20210610/workspace-at-home410853fc3fb.jpg"></MudImage>
            </MudAvatar>
            @* <MudIcon Icon="fa-light fa-display-code" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/> *@
            <MudText Typo="Typo.h6" Style="@_workspaceTitleStyle">
                @_project?.ProjectName
            </MudText>
        </MudStack>
    </MudStack>
    <MudStack Spacing="0">
        <MudStack Row AlignItems="AlignItems.Center">
            <MudText Class="ml-2">
                <b>
                    @Localizer["Workspace Tools"]
                </b>
            </MudText>
        </MudStack>
        <MudList Clickable Dense>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-table-layout" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Dashboard"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="@SvgIcons.Databricks" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Databricks"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-hard-drive" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Storage"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-browser" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Web App"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-database" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["SQL Database"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-book-bookmark" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Repositories"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="@SvgIcons.ArcGis" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["ArcGIS"]
                    </MudText>
                </MudStack>
            </MudListItem>
        </MudList>
    </MudStack>

    <MudStack Spacing="0">
        <MudStack Row AlignItems="AlignItems.Center">
            <MudText Class="ml-2">
                <b>
                    @Localizer["Administration"]
                </b>
            </MudText>
        </MudStack>
        <MudList Clickable Dense>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-shop" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Marketplace"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-users" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Users"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-tags" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Metadata"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-chart-mixed" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Reports"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-face-hand-over-mouth" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Sudo"]
                    </MudText>
                </MudStack>
            </MudListItem>
            <MudListItem>
                <MudStack Row AlignItems="AlignItems.Center">
                    <MudIcon Icon="fa-light fa-gear" Size="Size.Small" Class="mr-2" Style="font-size: 1rem;"/>
                    <MudText Style="@_workspaceTitleStyle">
                        @Localizer["Settings"]
                    </MudText>
                </MudStack>
            </MudListItem>
        </MudList>
    </MudStack>


</MudStack>

@code {

    [Parameter]
    public string WorkspaceAcronym { get; set; }

    private Datahub_Project _project;

    private readonly string _workspaceTitleStyle = new StyleBuilder()
        .AddStyle("white-space", "nowrap")
        .AddStyle("overflow", "hidden")
        .AddStyle("text-overflow", "ellipsis")
        .Build();

    protected override async Task OnInitializedAsync()
    {
        await using var dbContext = await _dbContextFactory.CreateDbContextAsync();

        _project = dbContext.Projects
            .AsNoTracking()
            .FirstOrDefault(p => p.Project_Acronym_CD == WorkspaceAcronym);
    }

    private string _path => $"w/{WorkspaceAcronym}";

    public struct SectionViews
    {
        public const string Dashboard = "dashboard";
        public const string Databricks = "databricks";
        public const string Storage = "storage";
        public const string WebApp = "webapp";
        public const string SqlDatabase = "sqldatabase";
        public const string Repositories = "repositories";
        public const string ArcGIS = "arcgis";

        public const string Marketplace = "marketplace";
        public const string Users = "users";
        public const string Metadata = "metadata";
        public const string Reports = "reports";
        public const string Sudo = "sudo";
        public const string Settings = "settings";
    }

}