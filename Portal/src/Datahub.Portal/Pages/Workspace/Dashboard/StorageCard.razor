@using Datahub.Core.Model.Projects
@inject DatahubPortalConfiguration _config


<MudPaper Outlined Class="pa-4">
    <MudStack>
        <MudStack Row AlignItems="AlignItems.Center">
            <DHIcon Icon="fa-light fa-hard-drive" Size="Size.Medium" />
            <MudText Typo="Typo.h3">@Localizer["Workspace Storage"]</MudText>
        </MudStack>

        <MudText>
            @Localizer["Access the storage accounts for the workspace to upload, download and share datasets with all workspace members. Datasets in workspace storage may also be published on Open Data."]
        </MudText>
        <MudElement HtmlTag="div">
            @if (ProjectResource.CreatedAt.HasValue)
            {
            <MudStack Row>
                <DHButton
                    Href="@($"/{PageRoutes.WorkspacePrefix}/{WorkspaceAcronym}/{WorkspaceSidebar.SectionViews.Storage}")"
                    Color="Color.Primary"
                    Variant="@Variant.Text"
                    EndIcon="@Icons.Material.Outlined.KeyboardDoubleArrowRight" Underline>
                    @Localizer["View storage"]
                </DHButton>
                
                @if (ShowPublishingDashboardButton)
                {
                    <DHButton 
                        Href="@($"/{PageRoutes.WorkspacePrefix}/{WorkspaceAcronym}/{WorkspaceSidebar.SectionViews.Publishing}")"
                        Color="Color.Primary"
                        Variant="@Variant.Text"
                        EndIcon="@Icons.Material.Outlined.KeyboardDoubleArrowRight" Underline>
                        @Localizer["Open Publishing Dashboard"]
                    </DHButton>
                }
            </MudStack>
            }
            else
            {
                <ToolBeingProvisionedButton />
            }
        </MudElement>
    </MudStack>
</MudPaper>

@code {

    private bool ShowPublishingDashboardButton => _config.CkanConfiguration.IsFeatureEnabled;

    [Parameter]
    [EditorRequired]
    public Project_Resources2 ProjectResource { get; set; }

    [Parameter]
    [EditorRequired]
    public string WorkspaceAcronym { get; set; }

}