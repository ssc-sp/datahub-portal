@using Datahub.Core.Model.Projects

<MudPaper Outlined Class="pa-4">
    <MudStack>
        <MudStack Row AlignItems="AlignItems.Center">
            <MudIcon Icon="@SidebarIcons.WebApp" Size="Size.Medium"/>
            <MudText Typo="Typo.h3">@Localizer["Web Application"]</MudText>
            <MudSpacer/>

        </MudStack>
        <MudText>
            @Localizer["Navigate to the Azure App Service to view your web application, where you can serve interactive and user-friendly dashboards."]
        </MudText>
        <MudElement HtmlTag="div">
            <MudButton
                Href="@GetWebAppUrl()"
                Target="_blank"
                Color="Color.Primary"
                Variant="@Variant.Text"
                EndIcon="@Icons.Material.Outlined.OpenInNew">
                @Localizer["Navigate to Web App"]
            </MudButton>
        </MudElement>
        <MudElement HtmlTag="div">
            <MudButton
                Href=@($"/w/{WorkspaceAcronym}/webapp")
                Color="Color.Primary"
                Variant="@Variant.Text"
                EndIcon="@Icons.Material.Outlined.KeyboardDoubleArrowRight">
                @Localizer["View Web App configuration"]
            </MudButton>
        </MudElement>
    </MudStack>
</MudPaper>

@code {

    [Parameter] [EditorRequired] public Project_Resources2 ProjectResource { get; set; }

    [Parameter] [EditorRequired] public string WorkspaceAcronym { get; set; }


    private string GetWebAppUrl()
    {
        return TerraformVariableExtraction.ExtractAppServiceConfiguration(ProjectResource).HostName;
    }

}