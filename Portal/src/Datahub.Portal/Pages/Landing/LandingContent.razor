@using Microsoft.Extensions.Options

@using Datahub.Portal.Pages.Landing.Tabs

@* Note in use *@

@inject IOptions<DataProjectsConfiguration> DataProjectsConfiguration

<MudStack>
    <MudText Typo="Typo.h1" Class="mt-12 mb-6">@Localizer["My Places"]</MudText>
    <MudTabs Elevation="0" Color="Color.Primary">
        @foreach (var (label, content) in GetTabs())
        {
            <MudTabPanel Text="@label" >
                <MudCard Class="pt-2" Elevation="0" >
                    @content
                </MudCard>
            </MudTabPanel>
        }
    </MudTabs>
</MudStack>

@code {

    private List<(string Control, RenderFragment Content)> GetTabs()
    {
        var res = new List<(string, RenderFragment)>
        {
            (Localizer["Initiatives"], @<UserProjects ShowTitle="false"/>)
        };

        if (DataProjectsConfiguration.Value.Databricks)
            res.Add((Localizer["Databricks Workbooks"], @<DatabricksTab/>));
        if (DataProjectsConfiguration.Value.PowerBI)
            res.Add((Localizer["PowerBI Reports"], @<PowerBITab/>));
        if (DataProjectsConfiguration.Value.WebForms)
            res.Add((Localizer["Data Entry"], @<DataEntryTab/>));

        return res;
    }
}