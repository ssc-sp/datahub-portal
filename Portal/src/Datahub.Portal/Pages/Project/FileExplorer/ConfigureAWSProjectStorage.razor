<MudDialog>
    <DialogContent>
        <MudTextField @bind-Value="_accessKeyId"
                      Label="Access Key Id" 
                      Variant="Variant.Text"
                      InputType="InputType.Password"
                      Adornment=@Adornment.End 
                      AdornmentIcon=@Icons.Material.Filled.ContentPaste/>
        <MudTextField @bind-Value="_accessKeySecret"
                      Label="Access Key Secret"
                      InputType="InputType.Password"
                      Variant="Variant.Text"
                      Adornment=@Adornment.End
                      AdornmentIcon=@Icons.Material.Filled.ContentPaste/>
        <MudTextField @bind-Value="_region"
                      Label="Region"
                      Variant="Variant.Text"
                      Adornment=@Adornment.End
                      AdornmentIcon=@Icons.Material.Filled.ContentPaste/>
        <MudTextField @bind-Value="_bucketName"
                      Label="Bucket Name"
                      Variant="Variant.Text"
                      Adornment=@Adornment.End
                      AdornmentIcon=@Icons.Material.Filled.ContentPaste />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="HandleCancel" Class="px-4">@Localizer["Cancel"]</MudButton>
        <MudButton Color="Color.Primary" OnClick="HandleSave" Disabled=@SaveDisabled() Variant="Variant.Filled">
            @Localizer["Save"]
        </MudButton>
    </DialogActions>
</MudDialog>

@code {

    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; } = null!;

    private string _accessKeyId = "";
    private string _accessKeySecret = "";
    private string _region = "ca-central-1";
    private string _bucketName = "";

    private void HandleCancel() => MudDialog.Cancel();

    private void HandleSave()
    {
        MudDialog.Close(DialogResult.Ok($"{_accessKeyId}|{_accessKeySecret}|{_region}|{_bucketName}"));
    }

    private bool SaveDisabled() =>
        string.IsNullOrEmpty(_accessKeyId) ||
        string.IsNullOrEmpty(_accessKeySecret) ||
        string.IsNullOrEmpty(_region) ||
        string.IsNullOrEmpty(_bucketName);
}
