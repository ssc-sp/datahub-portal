@using NRCan.Datahub.Shared.Data

<div id="sidebar">
  <div class="logo">
    <img src="_content/Datahub.Shared/img/datahub-logo-v2.png" />
  </div>
  <div class="links">
    @foreach(var link in GetLinks())
    {
      <NavLink class="@link.Icon.Color" href="@link.Href" Match="NavLinkMatch.All" ActiveClass="active">
        <i class="@link.Icon.Name"></i>
        @Localizer[@link.Label]
      </NavLink>
    }
    @foreach(var link in GetAuthorizedLinks())
    {
      <AuthorizeView Roles="@string.Join(',', link.Roles)">
        <NavLink class="@link.Icon.Color" href="@link.Href" Match="NavLinkMatch.All" ActiveClass="active">
          <i class="@link.Icon.Name"></i>
          @Localizer[@link.Label]
        </NavLink>
      </AuthorizeView>
    }
  </div>
</div>

@code {

  private List<(string Href, Icon Icon, string Label)> GetLinks()
  {
    return new List<(string, Icon, string)>()
    {
      ("/", Icon.HOME, "SIDEBAR.Home"),
      ("/storage", Icon.STORAGE, "SIDEBAR.Storage"),
      ("/resources", Icon.RESOURCES, "SIDEBAR.Resources"),
      ("/datasets", Icon.DATASETS, "SIDEBAR.Datasets"),
      ("/powerbi", Icon.POWERBI, "SIDEBAR.PowerBI"),
      ("/admin", Icon.ADMIN, "SIDEBAR.Admin")
    };
  }

  private List<(string Href, Icon Icon, string Label, List<string> Roles)> GetAuthorizedLinks()
  {
    return new List<(string, Icon, string, List<string>)>()
    {
      ("/admin", Icon.ADMIN, "SIDEBAR.Admin",
        new List<string>()
        {
          "datahub-admin",
          "project-admin"
        }
      )
    };
  }
}